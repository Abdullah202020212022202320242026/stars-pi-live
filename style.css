// Pi Login
const scopes = ['username', 'payments'];

document.getElementById('pi-login').addEventListener('click', async () => {
  try {
    const result = await window.Pi.authenticate(scopes, onIncompletePaymentFound);
    alert(`مرحباً ${result.user.username}`);
    console.log("User info:", result.user);
  } catch (error) {
    console.error("خطأ في تسجيل الدخول:", error);
  }
});

function onIncompletePaymentFound(payment) {
  console.log('تم العثور على دفعة غير مكتملة:', payment);
}

// Click gift event (display selection for future payment)
document.querySelectorAll('.gift').forEach((gift) => {
  gift.addEventListener('click', () => {
    const name = gift.getAttribute('data-name');
    const price = gift.getAttribute('data-price');
    alert(`🎁 اخترت هدية: ${name} بقيمة ${price} Pi (قريباً سيتم تنفيذ الدفع!)`);
    // لاحقًا: تنفيذ عملية الدفع عبر Pi SDK
  });
});
